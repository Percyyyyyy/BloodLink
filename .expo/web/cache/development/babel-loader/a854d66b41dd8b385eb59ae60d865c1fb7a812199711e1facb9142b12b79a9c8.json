{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\kenzo\\\\OneDrive\\\\Bureau\\\\ESP\\\\BloodLink\\\\frontEnd\\\\composants\\\\Auth.tsx\";\nimport React, { useState } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport AppState from \"react-native-web/dist/exports/AppState\";\nimport { supabase } from '../lib/supabase';\nimport { Button, Input } from 'react-native-elements';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAppState.addEventListener('change', function (state) {\n  if (state === 'active') {\n    supabase.auth.startAutoRefresh();\n  } else {\n    supabase.auth.stopAutoRefresh();\n  }\n});\nexport default function Auth() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var navigation = useNavigation();\n  function signInWithEmail() {\n    return _signInWithEmail.apply(this, arguments);\n  }\n  function _signInWithEmail() {\n    _signInWithEmail = _asyncToGenerator(function* () {\n      setLoading(true);\n      var _yield$supabase$auth$ = yield supabase.auth.signInWithPassword({\n          email: email,\n          password: password\n        }),\n        error = _yield$supabase$auth$.error;\n      if (error) {\n        Alert.alert(error.message);\n      } else {}\n      var _yield$supabase$auth$2 = yield supabase.auth.getUser(),\n        user = _yield$supabase$auth$2.data.user;\n      console.log(user);\n      setLoading(false);\n      navigation.navigate('Accueil');\n    });\n    return _signInWithEmail.apply(this, arguments);\n  }\n  function signUpWithEmail() {\n    return _signUpWithEmail.apply(this, arguments);\n  }\n  function _signUpWithEmail() {\n    _signUpWithEmail = _asyncToGenerator(function* () {\n      setLoading(true);\n      var _yield$supabase$auth$3 = yield supabase.auth.signUp({\n          email: email,\n          password: password\n        }),\n        session = _yield$supabase$auth$3.data.session,\n        error = _yield$supabase$auth$3.error;\n      if (error) console.log(error);\n      if (!session) Alert.alert('Please check your inbox for email verification!');else {\n        setLoading(false);\n        navigation.navigate('Accueil');\n      }\n    });\n    return _signUpWithEmail.apply(this, arguments);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: [styles.verticallySpaced, styles.mt20],\n      children: _jsxDEV(Input, {\n        label: \"Email\",\n        leftIcon: {\n          type: 'font-awesome',\n          name: 'envelope'\n        },\n        onChangeText: function onChangeText(text) {\n          return setEmail(text);\n        },\n        value: email,\n        placeholder: \"email@address.com\",\n        autoCapitalize: 'none'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.verticallySpaced,\n      children: _jsxDEV(Input, {\n        label: \"Password\",\n        leftIcon: {\n          type: 'font-awesome',\n          name: 'lock'\n        },\n        onChangeText: function onChangeText(text) {\n          return setPassword(text);\n        },\n        value: password,\n        secureTextEntry: true,\n        placeholder: \"Password\",\n        autoCapitalize: 'none'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: [styles.verticallySpaced, styles.mt20],\n      children: _jsxDEV(Button, {\n        title: \"Sign in\",\n        disabled: loading,\n        onPress: function onPress() {\n          return signInWithEmail();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.verticallySpaced,\n      children: _jsxDEV(Button, {\n        title: \"Sign up\",\n        disabled: loading,\n        onPress: function onPress() {\n          return signUpWithEmail();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: 40,\n    padding: 12\n  },\n  verticallySpaced: {\n    paddingTop: 4,\n    paddingBottom: 4,\n    alignSelf: 'stretch'\n  },\n  mt20: {\n    marginTop: 20\n  }\n});","map":{"version":3,"names":["React","useState","Alert","StyleSheet","View","AppState","supabase","Button","Input","useNavigation","jsxDEV","_jsxDEV","addEventListener","state","auth","startAutoRefresh","stopAutoRefresh","Auth","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","loading","setLoading","navigation","signInWithEmail","_signInWithEmail","apply","arguments","_asyncToGenerator","_yield$supabase$auth$","signInWithPassword","error","alert","message","_yield$supabase$auth$2","getUser","user","data","console","log","navigate","signUpWithEmail","_signUpWithEmail","_yield$supabase$auth$3","signUp","session","style","styles","container","children","verticallySpaced","mt20","label","leftIcon","type","name","onChangeText","text","value","placeholder","autoCapitalize","fileName","_jsxFileName","lineNumber","columnNumber","secureTextEntry","title","disabled","onPress","create","marginTop","padding","paddingTop","paddingBottom","alignSelf"],"sources":["C:/Users/kenzo/OneDrive/Bureau/ESP/BloodLink/frontEnd/composants/Auth.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { Alert, StyleSheet, View, AppState } from 'react-native'\r\nimport { supabase } from '../lib/supabase'\r\nimport { Button, Input } from 'react-native-elements'\r\nimport { useNavigation } from '@react-navigation/native'\r\nimport Accueil from '../Ecrans/Accueil';\r\n\r\n// Tells Supabase Auth to continuously refresh the session automatically if\r\n// the app is in the foreground. When this is added, you will continue to receive\r\n// `onAuthStateChange` events with the `TOKEN_REFRESHED` or `SIGNED_OUT` event\r\n// if the user's session is terminated. This should only be registered once.\r\nAppState.addEventListener('change', (state) => {\r\n  if (state === 'active') {\r\n    supabase.auth.startAutoRefresh()\r\n  } else {\r\n    supabase.auth.stopAutoRefresh()\r\n  }\r\n})\r\n\r\nexport default function Auth() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const navigation = useNavigation();\r\n\r\n  async function signInWithEmail() {\r\n    setLoading(true)\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email: email,\r\n      password: password,\r\n    })\r\n\r\n    if (error)\r\n    {\r\n      Alert.alert(error.message)\r\n    } \r\n    else {\r\n      \r\n    }\r\n   \r\nconst { data: { user } } = await supabase.auth.getUser()\r\nconsole.log(user);\r\n\r\n    \r\n    setLoading(false)\r\n    navigation.navigate('Accueil');\r\n\r\n  }\r\n\r\n  async function signUpWithEmail() {\r\n    setLoading(true)\r\n    const {\r\n      data: { session },\r\n      error,\r\n    } = await supabase.auth.signUp({\r\n      email: email,\r\n      password: password,\r\n    })\r\n\r\n    if (error) console.log(error);\r\n\r\n    if (!session) Alert.alert('Please check your inbox for email verification!');\r\n    else {\r\n      setLoading(false);\r\n      navigation.navigate('Accueil');\r\n    }\r\n  }\r\n\r\n  return (\r\n\r\n    <View style={styles.container}>\r\n      <View style={[styles.verticallySpaced, styles.mt20]}>\r\n        <Input\r\n          label=\"Email\"\r\n          leftIcon={{ type: 'font-awesome', name: 'envelope' }}\r\n          onChangeText={(text) => setEmail(text)}\r\n          value={email}\r\n          placeholder=\"email@address.com\"\r\n          autoCapitalize={'none'}\r\n        />\r\n      </View>\r\n      <View style={styles.verticallySpaced}>\r\n        <Input\r\n          label=\"Password\"\r\n          leftIcon={{ type: 'font-awesome', name: 'lock' }}\r\n          onChangeText={(text) => setPassword(text)}\r\n          value={password}\r\n          secureTextEntry={true}\r\n          placeholder=\"Password\"\r\n          autoCapitalize={'none'}\r\n        />\r\n      </View>\r\n      <View style={[styles.verticallySpaced, styles.mt20]}>\r\n        <Button title=\"Sign in\" disabled={loading} onPress={() => signInWithEmail()} />\r\n      </View>\r\n      <View style={styles.verticallySpaced}>\r\n        <Button title=\"Sign up\" disabled={loading} onPress={() => signUpWithEmail()} />\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    marginTop: 40,\r\n    padding: 12,\r\n  },\r\n  verticallySpaced: {\r\n    paddingTop: 4,\r\n    paddingBottom: 4,\r\n    alignSelf: 'stretch',\r\n  },\r\n  mt20: {\r\n    marginTop: 20,\r\n  },\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}